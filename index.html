<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tools to query OMOP conCEPTs for standard health vocabularies (all pros no cons!) • omopcept</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools to query OMOP conCEPTs for standard health vocabularies (all pros no cons!)">
<meta name="description" content="Access to OMOP Common Data Model medical vocabularies and flexible tidyverse compatible R functions for querying.">
<meta property="og:description" content="Access to OMOP Common Data Model medical vocabularies and flexible tidyverse compatible R functions for querying.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">omopcept</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/drug-classes.html">Getting drug classes from the OMOP hierarchy</a></li>
    <li><a class="dropdown-item" href="articles/getting-omop-concept-data.html">getting-omop-concept-data</a></li>
    <li><a class="dropdown-item" href="articles/hierarchy-for-blood-counts.html">Exploring OMOP hierarchy for blood counts</a></li>
    <li><a class="dropdown-item" href="articles/query-and-graph-concept-hierarchies.html">query-and-graph-concept-hierarchies</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SAFEHR-data/omopcept/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="omopcept">omopcept<a class="anchor" aria-label="anchor" href="#omopcept"></a>
</h1></div>
<!-- badges: start -->

<p><strong>Active development 2025, breaking changes possible</strong></p>
<p><strong>omopcept</strong> provides access to <strong>OMOP</strong> <em>con</em><strong>CEPT</strong><em>s</em> (all pros, no <em>cons</em>!).</p>
<p>Makes it super-easy to get the names associated with concept IDs and allows exploration and visualisation of OMOP hierarchies.</p>
<p><a href="https://www.ohdsi.org/2024showcase-112/?_gl=1*190hru4*_ga*MTA2MzM2NTAzOC4xNzIwMDIzMjcz*_ga_PNYYSZVRVX*MTczODE1ODI3Mi4zNC4xLjE3MzgxNTgzMDIuMC4wLjA." class="external-link">Link to poster &amp; report</a> presented at OHDSI Global Symposium 2024.</p>
<p><strong>omopcept</strong> provides R functions that are :</p>
<ul>
<li>modern</li>
<li>flexible</li>
<li>tidyverse compatible</li>
<li>memory efficient (using arrow parquet)</li>
</ul>
<p><strong>omopcept</strong> includes concise named copies of functions designed for interactive use e.g. <code><a href="reference/omop_id.html">oid()</a></code> and <code><a href="reference/omop_names.html">onames()</a></code> to search concept ids and names respectively. For example the line below can be used to return all ~ 1000 OMOP ids for SNOMED codes for clinical drugs starting with A.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">onames</span>(<span class="st">"^a"</span>,<span class="at">d=</span><span class="st">"DRUG"</span>,<span class="at">v=</span><span class="st">"SNOMED"</span>,<span class="at">cc=</span><span class="st">"Clinical Drug"</span>)</span></code></pre></div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the development version of omopcept with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"SAFEHR-data/omopcept"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="omop-vocabularies-data">OMOP vocabularies data<a class="anchor" aria-label="anchor" href="#omop-vocabularies-data"></a>
</h2>
<p>OMOP vocabularies can be searched and downloaded from <a href="https://athena.ohdsi.org" class="external-link">Athena – the OHDSI vocabularies repository</a>. <strong>omopcept</strong> provides R tools to interact with OMOP concepts in a more reproducible way.</p>
<p><strong>omopcept</strong> can use vocabulary files that you have downloaded from Athena, or automatically download a subset of the vocabularies that we have saved in the cloud.</p>
</div>
<div class="section level2">
<h2 id="getting-started-with-omopcept">Getting started with omopcept<a class="anchor" aria-label="anchor" href="#getting-started-with-omopcept"></a>
</h2>
<p>On initial use omopcept tries to download OMOP vocabulary files from the cloud to a local package cache where it can be accessed in future sessions. The <a href="https://arrow.apache.org/docs/r/index.html" class="external-link">arrow R package</a> allows parquet files to be opened and queried in dplyr pipelines without having to read in the data. e.g. the code below will return just the top rows of the concept table.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://SAFEHR-data.github.io/omopcept/" class="external-link">omopcept</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/omop_concept.html">omop_concept</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="main-omopcept-functions">Main omopcept functions<a class="anchor" aria-label="anchor" href="#main-omopcept-functions"></a>
</h2>
<table class="table">
<colgroup>
<col width="19%">
<col width="12%">
<col width="69%">
</colgroup>
<thead><tr class="header">
<th>full name</th>
<th>quick interactive name</th>
<th>action</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/omop_names.html">omop_names()</a></code></td>
<td><code><a href="reference/omop_names.html">onames()</a></code></td>
<td>search concepts by parts of names</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_id.html">omop_id()</a></code></td>
<td><code><a href="reference/omop_id.html">oid()</a></code></td>
<td>search for concept_id(s)</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_domain.html">omop_domain()</a></code></td>
<td>-</td>
<td>return domain for concept_id(s)</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_join_name.html">omop_join_name()</a></code></td>
<td><code><a href="reference/omop_join_name.html">ojoin()</a></code></td>
<td>join an omop name column onto a table with an id column</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_join_name_all.html">omop_join_name_all()</a></code></td>
<td><code><a href="reference/omop_join_name_all.html">ojoinall()</a></code></td>
<td>join omop names columns onto all id columns in a table</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_check_names.html">omop_check_names()</a></code></td>
<td><code><a href="reference/omop_check_names.html">ochecknames()</a></code></td>
<td>check that names match ids</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_ancestors.html">omop_ancestors()</a></code></td>
<td><code><a href="reference/omop_ancestors.html">oance()</a></code></td>
<td>return ancestors of a concept</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_descendants.html">omop_descendants()</a></code></td>
<td><code><a href="reference/omop_descendants.html">odesc()</a></code></td>
<td>return descendants of a concept</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_relations.html">omop_relations()</a></code></td>
<td><code><a href="reference/omop_relations.html">orels()</a></code></td>
<td>return (immediate) relations of a concept</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_relations.html">omop_relations()</a></code></td>
<td><code><a href="reference/omop_relations.html">orels()</a></code></td>
<td>return (immediate) relations of a concept and the relations of those up to <code>nsteps</code> including the nature of the relationship e.g. ‘Is a’</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_graph.html">omop_graph()</a></code></td>
<td>-</td>
<td>graph omop relationships (experimental)</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_concept.html">omop_concept()</a></code></td>
<td><code><a href="reference/omop_concept.html">oc()</a></code></td>
<td>return reference to concept table (for use in dplyr pipelines)</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_concept_ancestor.html">omop_concept_ancestor()</a></code></td>
<td><code><a href="reference/omop_concept_ancestor.html">oca()</a></code></td>
<td>return reference to concept ancestor table</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_concept_relationship.html">omop_concept_relationship()</a></code></td>
<td><code><a href="reference/omop_concept_relationship.html">ocr()</a></code></td>
<td>return reference to concept relationship table</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_concept_fields.html">omop_concept_fields()</a></code></td>
<td><code><a href="reference/omop_concept_fields.html">ocfields()</a></code></td>
<td>names of concept table columns</td>
</tr>
<tr class="even">
<td><code><a href="reference/omop_concept_ancestor_fields.html">omop_concept_ancestor_fields()</a></code></td>
<td><code><a href="reference/omop_concept_ancestor_fields.html">ocafields()</a></code></td>
<td>names of concept ancestor table columns</td>
</tr>
<tr class="odd">
<td><code><a href="reference/omop_concept_relationship_fields.html">omop_concept_relationship_fields()</a></code></td>
<td><code><a href="reference/omop_concept_relationship_fields.html">ocrfields()</a></code></td>
<td>names of concept relationship table columns</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="omop-outline">OMOP outline<a class="anchor" aria-label="anchor" href="#omop-outline"></a>
</h2>
<p>The <a href="https://ohdsi.github.io/CommonDataModel/" class="external-link">OMOP Common Data Model</a> is an open standard for health data. “[It is] designed to standardize the structure and content of observational data and to enable efficient analyses that can produce reliable evidence”.</p>
<p>OMOP is maintained by OHDSI (pronounced “Odyssey”). “The Observational Health Data Sciences and Informatics program is a multi-stakeholder, interdisciplinary collaborative that strives to improve medical decision making and bring better health outcomes to patients around the world.”</p>
</div>
<div class="section level2">
<h2 id="omop-vocabularies-in-the-background">OMOP vocabularies in the background<a class="anchor" aria-label="anchor" href="#omop-vocabularies-in-the-background"></a>
</h2>
<p>Vocabularies downloaded from Athena include tables called CONCEPT.csv, CONCEPT_ANCESTOR.csv and CONCEPT_RELATIONSHIP.csv.</p>
<p>You have two main options :</p>
<ol style="list-style-type: decimal">
<li><p>manually download selected vocabulary csv files from Athena, use <code><a href="reference/omop_vocabs_preprocess.html">omopcept::omop_vocabs_preprocess()</a></code></p></li>
<li><p>automatically download pre-processed vocabulary files saved in the cloud by us</p></li>
</ol>
<p><strong>omopcept</strong> downloads a selection of vocabularies and stores them locally the first time you use it (in the recommended data location for R packages). The download does not need to be repeated until you update the package. Vocabularies are stored as <a href="https://parquet.apache.org/" class="external-link">parquet</a> files that can be queried in a memory-efficient manner without having to first read the data in to memory.</p>
<div class="section level3">
<h3 id="omop-concept-table-fields">OMOP concept table fields<a class="anchor" aria-label="anchor" href="#omop-concept-table-fields"></a>
</h3>
<table class="table">
<colgroup>
<col width="25%">
<col width="51%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="left">fields</th>
<th align="left">about</th>
<th align="left">query_arguments</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">concept_id</td>
<td align="left">unique id</td>
<td align="left">c_ids</td>
</tr>
<tr class="even">
<td align="left">concept_name</td>
<td align="left">descriptive name</td>
<td align="left">pattern</td>
</tr>
<tr class="odd">
<td align="left">domain_id</td>
<td align="left">e.g. drug, measurement</td>
<td align="left">d_ids</td>
</tr>
<tr class="even">
<td align="left">vocabulary_id</td>
<td align="left">e.g. LOINC, SNOMED</td>
<td align="left">v_ids</td>
</tr>
<tr class="odd">
<td align="left">concept_class_id</td>
<td align="left">e.g. Clinical Observation, Organism</td>
<td align="left">cc_ids</td>
</tr>
<tr class="even">
<td align="left">standard_concept</td>
<td align="left">standard or not</td>
<td align="left">standard</td>
</tr>
<tr class="odd">
<td align="left">concept_code</td>
<td align="left">source code</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">valid_start_date</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">valid_end_date</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">invalid_reason</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="omop_names-query-concepts-by-their-names">
<code>omop_names()</code>: query concepts by their names<a class="anchor" aria-label="anchor" href="#omop_names-query-concepts-by-their-names"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/omop_names.html">omop_names</a></span><span class="op">(</span><span class="st">"chemotherapy"</span>, v_ids<span class="op">=</span><span class="st">"LOINC"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 71 × 10</span></span>
<span><span class="co">#&gt;    concept_id concept_name              domain_id vocabulary_id concept_class_id</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;chr&gt;                     &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;           </span></span>
<span><span class="co">#&gt;  1    1035179 Chemotherapy - IV         Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  2    1035159 Chemotherapy - Oral       Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  3    1035128 Chemotherapy - Other      Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  4   45882480 Chemotherapy, NOS         Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  5   45876436 Chemotherapy Administered Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  6   45884295 Unknown if any chemother… Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  7   45880125 No chemotherapy administ… Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  8   45879751 Chemotherapy              Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt;  9   45882373 Chemotherapy spill        Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt; 10   45878374 Chemotherapy, single age… Meas Val… LOINC         Answer          </span></span>
<span><span class="co">#&gt; # ℹ 61 more rows</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: standard_concept &lt;chr&gt;, concept_code &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   valid_start_date &lt;date&gt;, valid_end_date &lt;date&gt;, invalid_reason &lt;chr&gt;</span></span>
<span></span>
<span><span class="fu"><a href="reference/omop_names.html">omop_names</a></span><span class="op">(</span><span class="st">"chemotherapy"</span>, v_ids<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOINC"</span>,<span class="st">"SNOMED"</span><span class="op">)</span>, d_ids<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Observation"</span>,<span class="st">"Procedure"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 316 × 10</span></span>
<span><span class="co">#&gt;    concept_id concept_name              domain_id vocabulary_id concept_class_id</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;chr&gt;                     &lt;chr&gt;     &lt;chr&gt;         &lt;chr&gt;           </span></span>
<span><span class="co">#&gt;  1   36305649 Chemotherapy infusion st… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  2   36305185 Chemotherapy infusion st… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  3   36305554 Chemotherapy infusion st… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  4   36305537 Chemotherapy infusion st… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  5   36660670 Cancer chemotherapy rece… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  6    3046488 Chemotherapy [Minimum Da… Observat… LOINC         Survey          </span></span>
<span><span class="co">#&gt;  7   40768860 Cancer chemotherapy rece… Observat… LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  8   36303659 Guidance for chemoemboli… Procedure LOINC         Clinical Observ…</span></span>
<span><span class="co">#&gt;  9    1024644 Guidance for chemoemboli… Observat… LOINC         LOINC Component </span></span>
<span><span class="co">#&gt; 10    1004252 Flag for Date 1st chemot… Observat… LOINC         LOINC Component </span></span>
<span><span class="co">#&gt; # ℹ 306 more rows</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: standard_concept &lt;chr&gt;, concept_code &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   valid_start_date &lt;date&gt;, valid_end_date &lt;date&gt;, invalid_reason &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="omop_join_name-join-concept-names-onto-a-concept_id-dataframe-column">
<code>omop_join_name()</code>: join concept names onto a <code>*concept_id</code> dataframe column<a class="anchor" aria-label="anchor" href="#omop_join_name-join-concept-names-onto-a-concept_id-dataframe-column"></a>
</h2>
<p>Helps to interpret OMOP data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>concept_id<span class="op">=</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3571338L</span>,<span class="fl">4002075L</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/omop_join_name.html">omop_join_name</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   concept_id concept_name     </span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;            </span></span>
<span><span class="co">#&gt; 1    3571338 Problem behaviour</span></span>
<span><span class="co">#&gt; 2    4002075 BLUE LOTION</span></span>
<span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>drug_concept_id<span class="op">=</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000794L</span>,<span class="fl">4002592L</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/omop_join_name.html">omop_join_name</a></span><span class="op">(</span>namestart<span class="op">=</span><span class="st">"drug"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;   drug_concept_id drug_concept_name      </span></span>
<span><span class="co">#&gt;             &lt;int&gt; &lt;chr&gt;                  </span></span>
<span><span class="co">#&gt; 1         4000794 BUZZ OFF               </span></span>
<span><span class="co">#&gt; 2         4002592 DEXAMETHASONE INJECTION</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="omop_join_name_all-join-concept-names-onto-all-_concept_id-columns-in-a-dataframe">
<code>omop_join_name_all()</code>: join concept names onto all <code>*_concept_id</code> columns in a dataframe<a class="anchor" aria-label="anchor" href="#omop_join_name_all-join-concept-names-onto-all-_concept_id-columns-in-a-dataframe"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>concept_id<span class="op">=</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3571338L</span>,<span class="fl">3655355L</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            drug_concept_id<span class="op">=</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000794L</span>,<span class="fl">35628998L</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>            <span class="fu"><a href="reference/omop_join_name_all.html">omop_join_name_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 4</span></span>
<span><span class="co">#&gt;   concept_id concept_name         drug_concept_id drug_concept_name             </span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;                          &lt;int&gt; &lt;chr&gt;                         </span></span>
<span><span class="co">#&gt; 1    3571338 Problem behaviour            4000794 BUZZ OFF                      </span></span>
<span><span class="co">#&gt; 2    3655355 Erectile dysfunction        35628998 Retired SNOMED UK Drug extens…</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="omop_graph-starting-to-visualise-omop-hierarchies">
<code>omop_graph()</code>: starting to visualise OMOP hierarchies<a class="anchor" aria-label="anchor" href="#omop_graph-starting-to-visualise-omop-hierarchies"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">sharp</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/omop_names.html">omop_names</a></span><span class="op">(</span><span class="st">"Accident caused by sharp-edged object"</span>, standard<span class="op">=</span><span class="st">"S"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">relations</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/omop_relations.html">omop_relations</a></span><span class="op">(</span><span class="va">sharp</span><span class="op">$</span><span class="va">concept_id</span>, </span>
<span>                            r_ids<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Is a'</span>,<span class="st">'Subsumes'</span><span class="op">)</span>, </span>
<span>                            nsteps<span class="op">=</span><span class="fl">2</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="reference/omop_graph.html">omop_graph</a></span><span class="op">(</span><span class="va">relations</span>, saveplot<span class="op">=</span><span class="cn">FALSE</span>, graphtitle<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>           legendshow<span class="op">=</span><span class="cn">FALSE</span>, nodetxtsize<span class="op">=</span><span class="fl">5</span>, textcolourvar<span class="op">=</span><span class="st">"step"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  /var/folders/pl/k11lm9710hlgl02nvzx4z9wr0000gp/T//RtmpDoD4KN/downloaded_packages</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  /var/folders/pl/k11lm9710hlgl02nvzx4z9wr0000gp/T//RtmpDoD4KN/downloaded_packages</span></span></code></pre></div>
<p><img src="reference/figures/README-omop_graph-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="vocabularies-included">Vocabularies included<a class="anchor" aria-label="anchor" href="#vocabularies-included"></a>
</h2>
<p>The vocabularies that omopcept downloads automatically are a default download from Athena with a few extra vocabs added. If you wish to control which vocabularies are included you can manually download vocabulary csv files from Athena.</p>
<div class="section level3">
<h3 id="numbers-of-concepts-in-automatic-omopcept-vocabulary-download-by-domain-and-vocabulary">Numbers of concepts in automatic <strong>omopcept</strong> vocabulary download by domain and vocabulary<a class="anchor" aria-label="anchor" href="#numbers-of-concepts-in-automatic-omopcept-vocabulary-download-by-domain-and-vocabulary"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">concept_summary</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="reference/omop_concept.html">omop_concept</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">vocabulary_id</span>, sort<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">concept_summary</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">vocabulary_id</span>,<span class="va">n</span><span class="op">)</span>,x<span class="op">=</span><span class="va">n</span>,col<span class="op">=</span><span class="va">vocabulary_id</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"vocabulary_id"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>col<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-conceptplot-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h3>
<p>Development of <code>omopcept</code> has been partly supported by the <a href="https://www.uclhospitals.brc.nihr.ac.uk/" class="external-link">UCLH Biomedical Research Centre</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/SAFEHR-data/omopcept/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/SAFEHR-data/omopcept/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing omopcept</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andy South <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-4051-6135" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/SAFEHR-data/omopcept/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/SAFEHR-data/omopcept/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andy South.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
